(window.webpackJsonprattt=window.webpackJsonprattt||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),l=a.n(s),u=(a(16),a(1)),i=a(2),o=a(4),c=a(3),h=a(5);a(17);var m=function(){return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",null,r.a.createElement("a",{href:"?"},"RATTT")))},y=(a(18),function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("a",{href:"?p=game"},"Classic"),r.a.createElement("a",{href:"?p=custom"},"Custom"))}}]),t}(r.a.Component)),p=(a(19),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={rows:3,cols:3,sequence:3,players:[{name:"Player 1",type:"Human",symbol:"X"},{name:"Player 2",type:"Human",symbol:"O"}]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Custom"},r.a.createElement("h2",null,"Custom game"),r.a.createElement("form",null,r.a.createElement("h3",null,this.state.players[0].name||"Player 1"),r.a.createElement("label",null,"Name: ",r.a.createElement("input",{type:"name",maxLength:"16",value:this.state.players[0].name,onChange:function(t){var a=e.state.players;a[0].name=t.target.value.replace("&",""),e.setState({players:a})}})),r.a.createElement("label",null,"Type:",r.a.createElement("select",{value:this.state.players[0].type,onChange:function(t){var a=e.state.players;a[0].type=t.target.value,e.setState({players:a})}},r.a.createElement("option",{value:"Human"},"Human"),r.a.createElement("option",{value:"Brandom"},"Brandom"))),r.a.createElement("label",null,"Symbol: ",r.a.createElement("input",{type:"name",maxLength:"1",value:this.state.players[0].symbol,onChange:function(t){var a=e.state.players;a[0].symbol=t.target.value.replace("&",""),e.setState({players:a})}}))),r.a.createElement("form",null,r.a.createElement("h3",null,this.state.players[1].name||"Player 2"),r.a.createElement("label",null,"Name: ",r.a.createElement("input",{type:"name",maxLength:"16",value:this.state.players[1].name,onChange:function(t){var a=e.state.players;a[1].name=t.target.value.replace("&",""),e.setState({players:a})}})),r.a.createElement("label",null,"Type:",r.a.createElement("select",{value:this.state.players[1].type,onChange:function(t){var a=e.state.players;a[1].type=t.target.value,e.setState({players:a})}},r.a.createElement("option",{value:"Human"},"Human"),r.a.createElement("option",{value:"Brandom"},"Brandom"))),r.a.createElement("label",null,"Symbol: ",r.a.createElement("input",{type:"name",maxLength:"1",value:this.state.players[1].symbol,onChange:function(t){var a=e.state.players;a[1].symbol=t.target.value.replace("&",""),e.setState({players:a})}}))),r.a.createElement("form",null,r.a.createElement("h3",null,"Board"),r.a.createElement("label",null,"Rows: ",r.a.createElement("input",{type:"number",value:this.state.rows,onChange:function(t){return e.setState({rows:t.target.value})}})),r.a.createElement("label",null,"Columns: ",r.a.createElement("input",{type:"number",value:this.state.cols,onChange:function(t){return e.setState({cols:t.target.value})}})),r.a.createElement("label",null,"Sequence to win: ",r.a.createElement("input",{type:"number",value:this.state.sequence,onChange:function(t){return e.setState({sequence:t.target.value})}}))),r.a.createElement("br",null),r.a.createElement("a",{href:"?p=game&rows="+this.state.rows+"&cols="+this.state.cols+"&seq="+this.state.sequence+"&players="+JSON.stringify(this.state.players)},"Play"))}}]),t}(r.a.Component)),f=a(9),v=a(10),g=a(6),b=(a(20),a(21),function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Modal",style:{top:this.props.display?"30%":"-45%"}},r.a.createElement("p",null,this.props.children))}}]),t}(r.a.Component)),d=(a(22),function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Square",onClick:function(){return e.props.onClick()},style:{cursor:this.props.cursor}},r.a.createElement("p",null,this.props.value))}}]),t}(r.a.Component)),E=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Player";Object(u.a)(this,e),this.symbol=t,this.name=a,this.bot=!1}return Object(i.a)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getSymbol",value:function(){return this.symbol}},{key:"setSymbol",value:function(e){this.symbol=e}},{key:"isBot",value:function(){return this.bot}},{key:"setBot",value:function(e){this.bot=e}}]),e}(),w=function(e){function t(e,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Brandom";return Object(u.a)(this,t),Object(o.a)(this,Object(c.a)(t).call(this,e,a,n,r))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"play",value:function(){var e=this.game.getAvailableSquares();return e.length?e[Math.floor(Math.random()*e.length)]:null}}]),t}(function(e){function t(e,a,n){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Bot";return Object(u.a)(this,t),(r=Object(o.a)(this,Object(c.a)(t).call(this,n,s))).bot=!0,r.game=e,r.key=a,r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getGame",value:function(){return this.game}},{key:"setGame",value:function(e){this.game=e}},{key:"getKey",value:function(){return this.key}},{key:"setKey",value:function(e){this.key=e}}]),t}(E));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var j=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).rows=parseInt(a.props.rows)||3,a.cols=parseInt(a.props.cols)||a.rows,a.sequence=parseInt(a.props.sequence)||Math.max(a.rows,a.cols),document.documentElement.style.setProperty("--rows",a.rows),document.documentElement.style.setProperty("--cols",a.cols),document.documentElement.style.setProperty("--max",Math.max(a.rows,a.cols)),document.documentElement.style.setProperty("--rows-relation",Math.min(1,a.rows/a.cols)),document.documentElement.style.setProperty("--cols-relation",Math.min(1,a.cols/a.rows));var n=JSON.parse(a.props.players);if(n&&n.length>1){a.players=[];var r=!0,s=!1,l=void 0;try{for(var i,h=n.entries()[Symbol.iterator]();!(r=(i=h.next()).done);r=!0){var m=i.value,y=Object(v.a)(m,2),p=y[0],f=y[1];switch(f.name||(f.name="Player "+(p+1)),f.symbol||(f.symbol=(p+1)%10),f.type){case"Brandom":a.players.push(new w(Object(g.a)(a),p,f.symbol,f.name));break;default:a.players.push(new E(f.symbol,f.name))}}}catch(d){s=!0,l=d}finally{try{r||null==h.return||h.return()}finally{if(s)throw l}}}else a.players=[new E("X","Player 1"),new E("O","Player 2")];var b=a.getMatrix();return a.state={squares:b,running:!0,hasWinner:!1,winner:null,turn:0,showModal:!1},a.players[0].isBot()&&setTimeout(function(){var e=a.players[0].play();a.markSquare(e.rowIndex,e.colIndex)},100),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"reset",value:function(){var e=this,t=this.getMatrix();this.setState({squares:t,running:!0,hasWinner:!1,winner:null,turn:0}),this.players[0].isBot()&&setTimeout(function(){var t=e.players[0].play();e.markSquare(t.rowIndex,t.colIndex)},100)}},{key:"getMatrix",value:function(){for(var e=Array(this.rows),t=0;t<e.length;t++){e[t]=Array(this.cols);for(var a=0;a<e[t].length;a++)e[t][a]=-1}return e}},{key:"getAvailableSquares",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var a=0;a<this.cols;a++)-1===this.state.squares[t][a]&&e.push({rowIndex:t,colIndex:a});return e}},{key:"getRow",value:function(e){return this.state.squares[e].slice()}},{key:"getCol",value:function(e){for(var t=[],a=0;a<this.rows;a++)t.push(this.state.squares[a][e]);return t}},{key:"getCrescentDiagonal",value:function(e,t){for(var a=[],n=e,r=t;n>=0&&r<this.cols;n--,r++)a.push(this.state.squares[n][r]);return a}},{key:"getDecrescentDiagonal",value:function(e,t){for(var a=[],n=e,r=t;n<this.rows&&r<this.cols;n++,r++)a.push(this.state.squares[n][r]);return a}},{key:"findSequenceInArray",value:function(e){for(var t=1,a=1;a<e.length;a++)if(e[a]===e[a-1]&&-1!==e[a]){if(++t===this.sequence)return{hasWinner:!0,winner:e[a]}}else t=1;return{hasWinner:!1}}},{key:"calculateGameState",value:function(){for(var e=0;e<this.rows;e++){var t=this.findSequenceInArray(this.getRow(e));if(t.hasWinner)return k({running:!1},t)}for(var a=0;a<this.cols;a++){var n=this.findSequenceInArray(this.getCol(a));if(n.hasWinner)return k({running:!1},n)}for(var r=this.sequence-1;r<this.rows;r++){var s=this.findSequenceInArray(this.getCrescentDiagonal(r,0));if(s.hasWinner)return k({running:!1},s)}for(var l=1;l<=this.cols-this.sequence;l++){var u=this.findSequenceInArray(this.getCrescentDiagonal(this.rows-1,l));if(u.hasWinner)return k({running:!1},u)}for(var i=0;i<=this.rows-this.sequence;i++){var o=this.findSequenceInArray(this.getDecrescentDiagonal(i,0));if(o.hasWinner)return k({running:!1},o)}for(var c=1;c<=this.cols-this.sequence;c++){var h=this.findSequenceInArray(this.getDecrescentDiagonal(0,c));if(h.hasWinner)return k({running:!1},h)}for(var m=0;m<this.rows;m++)for(var y=0;y<this.cols;y++)if(-1===this.state.squares[m][y])return{running:!0};return{running:!1,hasWinner:!1}}},{key:"getGameStateMessage",value:function(){return this.state.running?this.players[this.state.turn].name+" plays":this.state.hasWinner?this.players[this.state.winner].name+" wins!":"Draw!"}},{key:"markSquare",value:function(e,t){var a=this;if(this.state.running&&-1===this.state.squares[e][t]){var n,r=this.state.squares.slice();r[e][t]=n=this.state.turn;var s=this.calculateGameState();s.running?n=this.state.turn<this.players.length-1?this.state.turn+1:0:s.hasWinner||(n=-1),this.setState(k({squares:r,turn:n},s)),this.setState({showModal:!s.running}),s.running&&this.players[n].isBot()&&setTimeout(function(){var e=a.players[n].play();a.markSquare(e.rowIndex,e.colIndex)},100)}}},{key:"handleSquareClick",value:function(e,t){this.state.running&&-1===this.state.squares[e][t]&&!this.players[this.state.turn].isBot()&&this.markSquare(e,t)}},{key:"renderSquare",value:function(e,t){var a=this;return r.a.createElement(d,{key:e*this.cols+t,onClick:function(){return a.handleSquareClick(e,t)},value:-1!==this.state.squares[e][t]?this.players[this.state.squares[e][t]].getSymbol():"",cursor:this.state.running&&-1===this.state.squares[e][t]?"pointer":"default"})}},{key:"renderAllSquares",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var a=0;a<this.cols;a++)e.push(this.renderSquare(t,a));return e}},{key:"renderPlayerButton",value:function(e){var t={};return this.state.turn===e&&(t={backgroundColor:"#00aaff",color:"white"}),r.a.createElement("button",{key:e,style:t},this.players[e].getName())}},{key:"renderAllPlayerButtons",value:function(){for(var e=[],t=0;t<this.players.length;t++)e.push(this.renderPlayerButton(t));return e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Game"},r.a.createElement("div",{className:"Board"},this.renderAllSquares()),r.a.createElement("div",{className:"PlayersPanel"},this.renderAllPlayerButtons()),r.a.createElement("div",{className:"ControlPanel"},r.a.createElement("button",{onClick:function(){return e.reset()}},"Reset")),r.a.createElement(b,{display:this.state.showModal},this.getGameStateMessage(),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.setState({showModal:!1})}},"Ok"),r.a.createElement("button",{onClick:function(){e.setState({showModal:!1}),e.reset()}},"Reset")))}}]),t}(r.a.Component),q=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(o.a)(this,Object(c.a)(t).call(this,e));var n=new URL(window.location);return a.page=n.searchParams.get("p"),a.rows=n.searchParams.get("rows")||3,a.cols=n.searchParams.get("cols")||3,a.sequence=n.searchParams.get("seq")||3,a.players=n.searchParams.get("players"),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){switch(this.page){case"game":return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(j,{rows:this.rows,cols:this.cols,sequence:this.sequence,players:this.players}));case"custom":return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(p,null));default:return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(y,null))}}}]),t}(r.a.Component);l.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.d0b542cf.chunk.js.map